import{A as b}from"./AppLayout-Deha_Wr3.js";import{d as C,r as i,c as p,o as x,a as D,w as g,u as S,b as d,e,t as n,n as I,f as h,g as v,F as L,h as M}from"./index-BwShmQsP.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"dashboard"},j={class:"plugin-card"},O={class:"card-header"},A={class:"plugin-info"},z={class:"plugin-meta"},P={class:"plugin-name-row"},R={class:"plugin-name"},V={class:"usage-main"},E={class:"usage-stats"},$={class:"usage-value"},F={class:"percentage"},U={class:"usage-meta"},Y={class:"reset-badge"},H={class:"usage-detail"},K={class:"progress-bar"},N={class:"dimensions-section"},q={class:"dimensions-grid"},G={class:"dimension-header"},J={class:"dimension-label"},Q={class:"dimension-percentage"},W={class:"dimension-progress"},X={class:"dimension-meta"},Z=C({__name:"DashboardView",setup(ee){const l=i(!1),k=i("claude-usage"),m=i([{id:"claude-usage",name:"Claude 用量监控",version:"1.2.0",pluginType:"data",dataType:"usage",enabled:!0,healthy:!0,author:"CUK Official",description:"监控 Claude Pro 用量与限制",icon:"bolt"}]),r=i({pluginId:"claude-usage",lastUpdated:new Date().toISOString(),dataType:"usage",percentage:78,used:78,limit:100,unit:"msgs",resetTime:new Date(Date.now()+7200*1e3+900*1e3).toISOString(),resetLabel:"2小时15分后重置",dimensions:[{id:"session_5h",label:"5小时会话限制",percentage:78,used:39,limit:50,resetTime:new Date(Date.now()+7200*1e3+900*1e3).toISOString()},{id:"daily",label:"每日总上限",percentage:45,used:225,limit:500,resetTime:new Date(Date.now()+840*60*1e3).toISOString()}]});i({pluginId:"claude-usage",status:"healthy",lastSuccess:new Date().toISOString(),errorCount:0,avgLatencyMs:450,successRate:.998});const w=p(()=>m.value.find(o=>o.id===k.value)),_=p(()=>{const o=r.value.percentage;return o>=90?"var(--color-accent-red)":o>=75?"var(--color-accent)":"var(--color-accent-green)"});function f(o){if(!o)return"未知";const s=new Date(o),a=new Date,t=s.getTime()-a.getTime();if(t<=0)return"即将重置";const c=Math.floor(t/(1e3*60*60)),u=Math.floor(t%(1e3*60*60)/(1e3*60));return c>0?`${c}h ${u}m 重置`:`${u}m 重置`}async function y(){l.value=!0,await new Promise(o=>setTimeout(o,1e3)),l.value=!1}return x(()=>{}),(o,s)=>(d(),D(S(b),null,{title:g(()=>[...s[0]||(s[0]=[e("h1",null,"仪表盘",-1)])]),default:g(()=>{var a;return[e("div",B,[e("div",j,[e("div",O,[e("div",A,[s[3]||(s[3]=e("div",{class:"plugin-icon",style:{background:"var(--color-accent)"}},[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),e("div",z,[e("div",P,[e("span",R,n((a=w.value)==null?void 0:a.name),1),s[1]||(s[1]=e("svg",{class:"dropdown-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M6 9l6 6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),s[2]||(s[2]=e("div",{class:"plugin-status"},[e("span",{class:"status-badge healthy"},"运行正常"),e("span",{class:"update-time"},"更新于 刚刚")],-1))])]),e("button",{class:I(["refresh-btn",{loading:l.value}]),onClick:y},[...s[4]||(s[4]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M23 4v6h-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M1 20v-6h6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2)]),e("div",V,[e("div",E,[s[6]||(s[6]=e("span",{class:"usage-label"},"当前使用量",-1)),e("div",$,[e("span",F,n(r.value.percentage),1),s[5]||(s[5]=e("span",{class:"percent-sign"},"%",-1))])]),e("div",U,[e("div",Y,n(r.value.resetLabel),1),e("div",H,"已用 "+n(r.value.used)+" / "+n(r.value.limit)+" "+n(r.value.unit),1)])]),e("div",K,[e("div",{class:"progress-fill",style:h({width:r.value.percentage+"%",background:_.value})},null,4)]),e("div",N,[s[7]||(s[7]=e("div",{class:"section-header"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),e("span",null,"多维度限额详情")],-1)),e("div",q,[(d(!0),v(L,null,M(r.value.dimensions,t=>(d(),v("div",{key:t.id,class:"dimension-card"},[e("div",G,[e("span",J,n(t.label),1),e("span",Q,n(t.percentage)+"%",1)]),e("div",W,[e("div",{class:"dimension-progress-fill",style:h({width:t.percentage+"%",background:t.percentage>=75?"var(--color-accent)":"var(--color-accent-green)"})},null,4)]),e("div",X,[e("span",null,n(t.used)+"/"+n(t.limit),1),e("span",null,n(f(t.resetTime)),1)])]))),128))])]),s[8]||(s[8]=e("div",{class:"monitoring-section"},[e("div",{class:"section-header"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[e("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"8",y1:"21",x2:"16",y2:"21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),e("line",{x1:"12",y1:"17",x2:"12",y2:"21",stroke:"currentColor","stroke-width":"2"})]),e("span",null,"连接监控 (RELIABILITY LAYER)")])],-1))])])]}),_:1}))}}),oe=T(Z,[["__scopeId","data-v-2936df02"]]);export{oe as default};
