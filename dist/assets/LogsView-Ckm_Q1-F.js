import{d as S,r as c,c as k,a as D,w as f,u as L,b as l,e,l as g,m as h,g as n,h as b,t as a,F as _,v as V,i as C,n as B}from"./index-BwShmQsP.js";import{A as O}from"./AppLayout-Deha_Wr3.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"logs-page"},M={class:"toolbar"},$={class:"toolbar-left"},A={class:"filter-group"},F=["value"],R={class:"search-box"},T={class:"logs-container"},z={key:0,class:"empty-state"},H={key:1,class:"logs-list"},N={class:"log-time"},E={class:"log-level"},P={class:"log-plugin"},Q={class:"log-message"},q=S({__name:"LogsView",setup(G){const i=c("all"),r=c("all"),u=c(""),d=c([{id:"1",timestamp:new Date(Date.now()-1e3).toISOString(),level:"info",pluginId:"claude-usage",message:"数据刷新成功，使用量: 78%"},{id:"2",timestamp:new Date(Date.now()-5e3).toISOString(),level:"info",pluginId:"openai-balance",message:"余额查询成功，剩余: $45.23"},{id:"3",timestamp:new Date(Date.now()-15e3).toISOString(),level:"warn",pluginId:"deepseek-monitor",message:"API 响应延迟较高: 1200ms"},{id:"4",timestamp:new Date(Date.now()-3e4).toISOString(),level:"error",pluginId:"deepseek-monitor",message:"请求超时，正在重试 (1/3)"},{id:"5",timestamp:new Date(Date.now()-6e4).toISOString(),level:"debug",pluginId:"claude-usage",message:"缓存命中，跳过网络请求"},{id:"6",timestamp:new Date(Date.now()-12e4).toISOString(),level:"info",pluginId:"claude-usage",message:"插件已启动"}]),I=k(()=>{const s=new Set(d.value.map(t=>t.pluginId));return Array.from(s)}),m=k(()=>d.value.filter(s=>!(i.value!=="all"&&s.level!==i.value||r.value!=="all"&&s.pluginId!==r.value||u.value&&!s.message.toLowerCase().includes(u.value.toLowerCase()))));function w(s){return new Date(s).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function x(){d.value=[]}function y(){const s=d.value.map(p=>`[${w(p.timestamp)}] [${p.level.toUpperCase()}] [${p.pluginId}] ${p.message}`).join(`
`),t=new Blob([s],{type:"text/plain"}),o=URL.createObjectURL(t),v=document.createElement("a");v.href=o,v.download=`cuk-logs-${new Date().toISOString().slice(0,10)}.txt`,v.click(),URL.revokeObjectURL(o)}return(s,t)=>(l(),D(L(O),null,{title:f(()=>[...t[3]||(t[3]=[e("h1",null,"运行日志",-1)])]),default:f(()=>[e("div",j,[e("div",M,[e("div",$,[e("div",A,[g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),class:"filter-select"},[...t[4]||(t[4]=[e("option",{value:"all"},"所有级别",-1),e("option",{value:"info"},"信息",-1),e("option",{value:"warn"},"警告",-1),e("option",{value:"error"},"错误",-1),e("option",{value:"debug"},"调试",-1)])],512),[[h,i.value]]),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.value=o),class:"filter-select"},[t[5]||(t[5]=e("option",{value:"all"},"所有插件",-1)),(l(!0),n(_,null,b(I.value,o=>(l(),n("option",{key:o,value:o},a(o),9,F))),128))],512),[[h,r.value]])]),e("div",R,[t[6]||(t[6]=e("svg",{class:"search-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[e("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor","stroke-width":"2"}),e("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>u.value=o),type:"text",placeholder:"搜索日志..."},null,512),[[V,u.value]])])]),e("div",{class:"toolbar-right"},[e("button",{class:"toolbar-btn",onClick:y},[...t[7]||(t[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),C(" 导出 ",-1)])]),e("button",{class:"toolbar-btn danger",onClick:x},[...t[8]||(t[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[e("polyline",{points:"3,6 5,6 21,6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),C(" 清空 ",-1)])])])]),e("div",T,[m.value.length===0?(l(),n("div",z,[...t[9]||(t[9]=[e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z",stroke:"currentColor","stroke-width":"2"}),e("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2"})],-1),e("p",null,"暂无日志",-1)])])):(l(),n("div",H,[(l(!0),n(_,null,b(m.value,o=>(l(),n("div",{key:o.id,class:B(["log-entry","level-"+o.level])},[e("span",N,a(w(o.timestamp)),1),e("span",E,a(o.level.toUpperCase()),1),e("span",P,a(o.pluginId),1),e("span",Q,a(o.message),1)],2))),128))]))])])]),_:1}))}}),X=U(q,[["__scopeId","data-v-9fa7ed1b"]]);export{X as default};
